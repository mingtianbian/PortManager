# PortManager (支持 IPv4 和 IPv6)

## 简介
PortManager 是一个用于管理端口的简单工具，可以方便地开放、关闭和管理端口，支持 IPv4 和 IPv6。

## 功能
- 开放指定端口或所有端口。
- 关闭已开放的端口。
- 更改已开放的端口。
- 添加或删除端口。
- 支持输入端口范围。
- 自动检测并显示本机 IPv4 和 IPv6 地址。
- 日志记录功能，便于调试和监控。
- 程序内置 `log(l)` 命令查看日志。

## 使用方法
1. 运行 `port_manager.py` 文件。
2. 启动时会自动打印本机的 IPv4 和 IPv6 地址。
3. 根据提示输入要开放的端口，支持以下几种输入方式：
   - 输入单个端口号，例如：`1`。
   - 输入多个端口号，以逗号分隔，例如：`1,2,3`。
   - 输入端口范围，以连字符分隔，例如：`1-100`。
   - 输入 `all` 开放所有端口（1-65535）。
4. 输入命令来管理端口：
   - `add(a) <端口1,端口2,...>`：增加端口。
   - `remove(r) <端口1,端口2,...>`：删除端口。
   - `change(c) <端口1,端口2,...>`：更改端口。
   - `log(l)`：查看当前日志文件内容。
   - `help(h)`：显示帮助信息。
   - `exit`：退出程序。
5. 程序会在后台为每个端口同时启动 IPv4 和 IPv6 监听线程。

## 注意事项
- 程序需要在具有管理员权限的环境中运行，以便操作系统允许端口的开放和关闭。
- 确保输入的端口号在合理的范围内（1 到 65535），并且没有被其他程序占用。
- 在公网环境中启用 IPv6 后，请检查防火墙和路由器设置，确保需要的端口对外开放。

## 更新说明
### v1.3.1（2025-5-29）
1. **新增日志查看命令**：
   - 在程序内输入 `log` 或 `l` 可直接显示当前日志文件内容。
2. **修复编码问题**：
   - 日志查看时自动检测 UTF-8 与 GBK 编码，避免乱码。
3. **优化重复日志打印**：
   - 避免同一端口重复记录启动信息。

### v1.3.0（2025-5-28）
- 支持 IPv6，双栈监听。
- 新增本机 IP 显示。
- 日志中区分 IPv4 和 IPv6 连接信息。

### v1.2.1（2024-5-27）
- 日志记录、异常处理和线程管理优化。

### v1.2.0（2024-5-25）
- 添加日志记录功能。

### v1.1.0（2024-5-19）
- 增加命令缩写和帮助信息。

### v1.0.0（2024-5-18）
- 初始版本，提供了基本的端口打开和管理功能。
